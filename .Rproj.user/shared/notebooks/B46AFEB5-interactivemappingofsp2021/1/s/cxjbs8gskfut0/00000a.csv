"0","#joining the constiuency shapefile with the winner dataframe"
"0","constituency_shp_mapping <- left_join(constituency_shp,winner_df, by = c(""spc16cd""=""ONS Code""))"
"0",""
"0","#the shapefile and results excel sheet had slightly different naming conventions "
"0","#for the Liberal Democrats so we have to manually change these a little."
"0","#make it all caps"
"0","constituency_shp_mapping$Win <- toupper(constituency_shp_mapping$Win)"
"0","#Swap LD to LIB"
"0","constituency_shp_mapping$Win <- gsub(""LD"",""LIB"",constituency_shp_mapping$Win)"
"0",""
"0","#Now join with the colour codes"
"0","constituency_shp_mapping <- left_join(constituency_shp_mapping,party_colours,by = c(""Win""=""party""))"
"0","#reorder"
"0","constituency_shp_mapping <- constituency_shp_mapping[order(constituency_shp_mapping$spc16cd),]"
"0","#reset rownumbers so they line up"
"0","rownames(constituency_shp_mapping) <- 1:nrow(constituency_shp_mapping)"
"0",""
"0","#calling our mapview function on the constituency_shp_mapping object"
"0","mapview(constituency_shp_mapping,"
"0","        #specifying which column's information we want to show"
"0","        zcol = ""Win"","
"0","        #and specify the colours, we can just select the relevant column"
"0","        col.regions = constituency_shp_mapping$colour_code,"
"0","        #and call on our barchart list to pop up"
"0","        popup = popupGraph(bar_plot_list, width = 300,height =300),"
"0","        legend = TRUE,"
"0","        layer.name = ""Party"""
"0",")"
